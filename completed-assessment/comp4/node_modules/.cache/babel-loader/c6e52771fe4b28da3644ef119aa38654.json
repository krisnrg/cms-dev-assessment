{"ast":null,"code":"import _defineProperty from\"/Users/kristiangonzalez/webdev/comp4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/kristiangonzalez/webdev/comp4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kristiangonzalez/webdev/comp4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/kristiangonzalez/webdev/comp4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kristiangonzalez/webdev/comp4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/kristiangonzalez/webdev/comp4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/kristiangonzalez/webdev/comp4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/kristiangonzalez/webdev/comp4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./App.css';import Story from'./components/Story';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={error:null,stories:[],currentItemIdx:1,currentLayout:1,totalStories:16,layouts:{1:5,2:5,3:3,4:2}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Different urls to fetch\nvar urls=[\"listings\"];// Function to fetch data from API\nvar fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(getData){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://sv-reqres.now.sh/api/\".concat(getData,\"/?per_page=\").concat(_this2.state.totalStories));case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;return _context.abrupt(\"return\",data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(_x){return _ref.apply(this,arguments);};}();// Iterate over them and load them to the state\nurls.forEach(function(url){fetchData(url).then(function(data){console.log(data.data);var nArray=data.data.slice(0);_this2.shuffle(nArray);console.log(typeof nArray);_this2.setState(function(state){return _defineProperty({// append all the urls to stories so that all datas shows initially\nstories:nArray},url,data.data);});});});}},{key:\"shuffle\",value:function shuffle(array){var currentIndex=array.length,temporaryValue,randomIndex;// While there remain elements to shuffle...\nwhile(0!==currentIndex){// Pick a remaining element...\nrandomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;// And swap it with the current element.\ntemporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue;}return array;}},{key:\"handleStoriesNext\",value:function handleStoriesNext(e){e.preventDefault();var _this$state=this.state,currentLayout=_this$state.currentLayout,layouts=_this$state.layouts;// go to the next layout\nif(currentLayout===Object.keys(layouts).length){this.setState({currentItemIdx:1,currentLayout:1});}else{this.setState(function(state){return{currentItemIdx:state.currentItemIdx+state.layouts[state.currentLayout],currentLayout:state.currentLayout+1};});}}},{key:\"handleStoriesPrev\",value:function handleStoriesPrev(e){e.preventDefault();var currentLayout=this.state.currentLayout;// go to the prev layout\nif(currentLayout===1){this.setState(function(state){return{currentItemIdx:state.totalStories-state.layouts[4],currentLayout:4};});}else{this.setState(function(state){return{currentItemIdx:state.currentItemIdx-state.layouts[state.currentLayout-1],currentLayout:state.currentLayout-1};});}}},{key:\"render\",value:function render(){var _this$state2=this.state,stories=_this$state2.stories,currentItemIdx=_this$state2.currentItemIdx,currentLayout=_this$state2.currentLayout,layouts=_this$state2.layouts;var nidx=currentItemIdx-1;return React.createElement(\"div\",{className:\"wrapper\"},React.createElement(\"div\",{className:\"grid layout\".concat(currentLayout)},stories.filter(function(elem,idx){return idx>=currentItemIdx&&idx<currentItemIdx+layouts[currentLayout];}).map(function(story,idx){var output=React.createElement(Story,{key:idx,title:story.title,story:story.description,url:story.mediaurl,idx:nidx});nidx=nidx+1;return output;})),React.createElement(\"nav\",null,React.createElement(\"div\",{className:\"controls\"},React.createElement(\"a\",{href:\"prev\",onClick:this.handleStoriesPrev.bind(this)},\"Prev.\"),React.createElement(\"a\",{href:\"next\",onClick:this.handleStoriesNext.bind(this)},\"Next\"))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/kristiangonzalez/webdev/comp4/src/App.js"],"names":["React","Story","App","props","state","error","stories","currentItemIdx","currentLayout","totalStories","layouts","urls","fetchData","getData","fetch","response","json","data","forEach","url","then","console","log","nArray","slice","shuffle","setState","array","currentIndex","length","temporaryValue","randomIndex","Math","floor","random","e","preventDefault","Object","keys","nidx","filter","elem","idx","map","story","output","title","description","mediaurl","handleStoriesPrev","bind","handleStoriesNext","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport Story from './components/Story';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      stories: [],\n      currentItemIdx: 1,\n      currentLayout: 1,\n      totalStories: 16,\n      layouts: {\n        1 : 5,\n        2 : 5,\n        3 : 3,\n        4 : 2,\n      }\n    };\n  }\n  \n  componentDidMount() {\n    // Different urls to fetch\n    const urls = [ \"listings\"]\n\n    // Function to fetch data from API\n    const fetchData = async (getData) => {\n      let response = await fetch(`https://sv-reqres.now.sh/api/${getData}/?per_page=${this.state.totalStories}`);\n      let data = await response.json();\n      return data;\n    }\n\n    // Iterate over them and load them to the state\n    urls.forEach((url) => {\n      fetchData(url).then( data => {\n        console.log(data.data);\n        let nArray = data.data.slice(0);\n        this.shuffle(nArray);\n        console.log(typeof(nArray));\n        this.setState(state => ({\n          // append all the urls to stories so that all datas shows initially\n          stories: nArray,\n          // put them in their own variables individually so we can swap between them\n          [url]: data.data\n        }))\n      })\n    })\n  }\n\n  shuffle(array) {\n    var currentIndex = array.length, temporaryValue, randomIndex;\n  \n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n  \n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n  \n      // And swap it with the current element.\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n  \n    return array;\n  }\n\n  handleStoriesNext(e){\n    e.preventDefault();\n    const { currentLayout, layouts } = this.state\n    // go to the next layout\n    if (currentLayout === Object.keys(layouts).length){\n      this.setState({\n        currentItemIdx: 1,\n        currentLayout: 1\n      })\n    } else {\n      this.setState(state => ({\n        currentItemIdx: state.currentItemIdx + state.layouts[state.currentLayout],\n        currentLayout: state.currentLayout + 1\n      }));\n    }\n  }\n  handleStoriesPrev(e){\n    e.preventDefault();\n    const { currentLayout } = this.state\n    // go to the prev layout\n    if (currentLayout === 1){\n      this.setState(state => ({\n        currentItemIdx: state.totalStories - state.layouts[4],\n        currentLayout: 4\n      }))\n    } else {\n      this.setState(state => ({\n        currentItemIdx: state.currentItemIdx - state.layouts[state.currentLayout - 1],\n        currentLayout: state.currentLayout - 1\n      }));\n    }\n  }\n\n\n  render() {\n    const { stories, currentItemIdx, currentLayout, layouts } = this.state;\n    let nidx = currentItemIdx - 1;\n    return(\n      <div className=\"wrapper\">\n        <div className={`grid layout${currentLayout}`}>\n          { stories.filter((elem, idx) => idx >= currentItemIdx && idx < currentItemIdx + layouts[currentLayout] )\n            .map((story, idx) => {\n              const output = <Story key={idx} title={story.title} story={story.description} url={story.mediaurl} idx={nidx}/>\n              nidx = nidx + 1\n              return output;\n            })}\n        </div>\n        <nav>\n          <div className=\"controls\">\n            <a href=\"prev\" onClick={this.handleStoriesPrev.bind(this)}>Prev.</a>\n            <a href=\"next\" onClick={this.handleStoriesNext.bind(this)}>Next</a>\n          </div>\n        </nav>\n    </div>\n    )}\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}